{% load cart %}
<div class="book">
    <div class="book-img d-block">
        <a href="{% url "catalog:book" row.slug row.id %}" class="img"
           style="background-image: url('{{ row.photo.url }}')"></a>
    </div>
    <a href="{% url "catalog:book" row.slug row.id %}"
       class="mt-3 text-dark text-decoration-none d-block ">{{ row.name }}</a>
    <div class="d-flex my-2 justify-content-between">
        <div class="text-muted">{{ row.category.name }}</div>
        {% if row|in_cart:request %}
            <a href="{% url "order:dec" row.id %}?to={{ request.path }}">
                -
            </a>
            <div>{{ row|in_cart:request }}</div>
            <a href="{% url "order:inc" row.id %}?to={{ request.path }}">
                +
            </a>
        {% else %}
            <a href="{% url "order:inc" row.id %}?to={{ request.path }}">
                <i class="bi bi-bag-fill"></i>
            </a>
        {% endif %}
        <div>{{ row.price }} so'm</div>
    </div>
</div>